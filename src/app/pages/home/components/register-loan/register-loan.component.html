<div class="page-title">Registrar nuevo pr√©stamo</div>

<div class="register-loan-container">
  <div class="card">

    <!-- Buscar usuario -->
    <div class="form-section">
      <label class="section-title">Buscar usuario</label>

      <div class="form-row">
        <div class="input-wrapper">
          <input
            type="text"
            placeholder="Ingrese el documento o nombre del usuario"
            [(ngModel)]="searchUserTerm"
            (input)="onUserSearch()"
          />
          <span class="icon" (click)="onUserSearch()">üîç</span>

          <!-- RESULTADOS DE USUARIO -->
          <ul class="dropdown" *ngIf="searchUserTerm && searchUserTerm.length >= 2 && !isUserSelected">
            <li *ngFor="let u of userResults" (click)="selectUser(u)">
              {{ u.nombre }} {{ u.apellido }} ‚Äî {{ u.documento }}
            </li>
            <li class="no-results" *ngIf="userResults.length === 0">
              No se encontraron usuarios.
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Buscar libro -->
    <div class="form-section">
      <label class="section-title">Buscar libro</label>

      <div class="form-row">
        <div class="input-wrapper">
          <input
            type="text"
            placeholder="Buscar por t√≠tulo del libro"
            [(ngModel)]="searchBookTerm"
            (input)="onBookSearch()"
          />
          <span class="icon" (click)="onBookSearch()">üîç</span>

          <!-- RESULTADOS DE LIBROS -->
          <ul class="dropdown" *ngIf="searchBookTerm && searchBookTerm.length >= 2 && !isBookSelected">
            <li *ngFor="let b of bookResults" (click)="selectBook(b)">
              {{ b.tituloLibro }} ‚Äî {{ b.isbnLibro }}
            </li>
            <li class="no-results" *ngIf="bookResults.length === 0">
              No se encontraron libros.
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Fecha de devoluci√≥n -->
    <div class="form-section">
      <label class="section-title">Fecha de devoluci√≥n</label>
      <div class="form-row">
        <div class="input-wrapper small">
          <input type="date" [(ngModel)]="returnDate" />
          <span class="icon">üìÖ</span>
        </div>
      </div>
    </div>

    <hr />

    <!-- Botones -->
    <div class="actions">
      <button class="btn btn-cancel" (click)="resetForm()">Cancelar</button>
      <button class="btn btn-primary" (click)="registerLoan()">Registrar pr√©stamo</button>
    </div>

  </div>
</div>